# üìä Mapa Mental de Carreira - Documenta√ß√£o T√©cnica

## üéØ Vis√£o Geral

O **Mapa Mental de Carreira** √© uma aplica√ß√£o React interativa que utiliza D3.js para visualizar conex√µes inteligentes entre posi√ß√µes profissionais. O sistema analisa compatibilidade salarial, √°reas profissionais e n√≠veis hier√°rquicos para sugerir transi√ß√µes de carreira realistas.

---

## üèóÔ∏è Arquitetura do Sistema

### **Stack Tecnol√≥gico**
- **Frontend**: React 18.2.0 + Vite 5.0.0
- **Visualiza√ß√£o**: D3.js 7.8.5 (SVG manipulation)
- **UI Framework**: Tailwind CSS 3.3.6
- **√çcones**: Lucide React
- **Linguagem**: JavaScript/JSX

### **Estrutura de Arquivos**
```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ CareerMindMapWorking.jsx  # Componente principal
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ positions.js              # Base de dados das posi√ß√µes
‚îî‚îÄ‚îÄ assets/                       # Recursos est√°ticos
```

---

## üß† Algoritmo de Conex√µes Inteligentes

### **Fun√ß√£o: `getSmartConnections(positionId)`**

O cora√ß√£o do sistema √© o algoritmo que calcula compatibilidade entre posi√ß√µes baseado em tr√™s pilares:

#### **1. Score Salarial (35-45 pontos)**
```javascript
const salaryFlexibility = 0.3; // 30% de flexibilidade
const minAcceptableSalary = currentSalaryAvg * (1 - salaryFlexibility);
const maxAcceptableSalary = currentSalaryAvg * (1 + salaryFlexibility * 1.5);
```

**Crit√©rios:**
- ‚úÖ **Sal√°rio compat√≠vel**: 15-35 pontos (dentro da faixa ¬±30%)
- ‚úÖ **Progress√£o salarial**: 10 pontos (sal√°rio maior que atual)
- ‚úÖ **Potencial de crescimento**: Bonifica√ß√£o por aumento salarial

#### **2. Score por √Årea Profissional (5-30 pontos)**
```javascript
const relatedAreas = {
  'Tecnologia': ['Dados', 'Produto'],
  'Gest√£o': ['Financeiro', 'Recursos Humanos'],
  'Financeiro': ['Gest√£o', 'Dados'],
  'Dados': ['Tecnologia', 'Financeiro'],
  'Produto': ['Tecnologia', 'Dados'],
  'Recursos Humanos': ['Gest√£o']
};
```

**Pontua√ß√£o:**
- üéØ **Mesma √°rea**: 30 pontos
- üîÑ **√Årea relacionada**: 18 pontos  
- üÜï **Nova √°rea**: 5 pontos

#### **3. Score por N√≠vel Hier√°rquico (15-25 pontos)**
```javascript
const levelScore = {
  'J√∫nior': 1, 'Pleno': 2, 'S√™nior': 3, 'Especialista': 3,
  'Coordenador': 4, 'Gerente': 5, 'Diretor': 6, 'VP': 7, 'C-Level': 8
};
```

**Progress√£o:**
- ‚öñÔ∏è **Mesmo n√≠vel**: 20 pontos
- üìà **Progress√£o natural** (+1 n√≠vel): 25 pontos
- üöÄ **Grande crescimento** (+2 n√≠veis): 15 pontos

### **Filtro de Qualidade**
- ‚úÖ Apenas conex√µes com **score ‚â• 20%** s√£o exibidas
- üìä M√°ximo de **12 conex√µes** por posi√ß√£o
- üèÜ Ordena√ß√£o por score (maior para menor)

---

## üé® Sistema de Visualiza√ß√£o

### **Layout do Mapa Mental**

#### **N√≥ Central**
- üìç **Posi√ß√£o**: Centro do SVG (500x350)
- üìè **Dimens√µes**: 160x80 pixels (posi√ß√£o atual)
- üé® **Estilo**: Borda dourada + sombra destacada

#### **Posicionamento Radial por √Årea**
```javascript
const pillarAngles = {
  'Tecnologia': { startAngle: 0, endAngle: Math.PI * 0.33 },
  'Produto': { startAngle: Math.PI * 0.33, endAngle: Math.PI * 0.66 },
  'Dados': { startAngle: Math.PI * 0.66, endAngle: Math.PI },
  'Gest√£o': { startAngle: Math.PI, endAngle: Math.PI * 1.33 },
  'Financeiro': { startAngle: Math.PI * 1.33, endAngle: Math.PI * 1.66 },
  'Recursos Humanos': { startAngle: Math.PI * 1.66, endAngle: Math.PI * 2 }
};
```

**C√°lculo de Posi√ß√£o:**
- üéØ Cada √°rea profissional ocupa um setor de ~60¬∞ (œÄ/3 radianos)
- üìê N√≥s da mesma √°rea s√£o distribu√≠dos uniformemente no setor
- üìè **Raio base**: 240px (interno), 280px (cross-functional)
- ‚ö° **Raio din√¢mico**: `radius += (score/100) * 40` (compatibilidade)

### **Sistema Anti-Colis√£o**

#### **Algoritmo de Detec√ß√£o**
```javascript
const detectCollision = (node1, node2) => {
  const margin = 25; // Margem de seguran√ßa
  return (
    node1.x < node2.x + node2.width + margin &&
    node1.x + node1.width + margin > node2.x &&
    node1.y < node2.y + node2.height + margin &&
    node1.y + node1.height + margin > node2.y
  );
};
```

#### **Resolu√ß√£o de Conflitos**
- üîÑ **100 itera√ß√µes m√°ximas** para resolver sobreposi√ß√µes
- üìê **Empurr√£o radial**: N√≥s s√£o afastados do centro em caso de colis√£o
- üéØ **Prioridade**: N√≥ central mant√©m posi√ß√£o fixa
- üìè **Limites**: N√≥s ficam dentro da √°rea do SVG (1000x700)

---

## üéÆ Interatividade e Estados

### **Estados Principais**
```javascript
const [selectedPositionId, setSelectedPositionId] = useState('dev-net');
const [visibleNodes, setVisibleNodes] = useState(['dev-net']);
const [visitedPositions, setVisitedPositions] = useState(['dev-net']);
const [searchTerm, setSearchTerm] = useState('');
const [searchResults, setSearchResults] = useState([]);
const [showSearch, setShowSearch] = useState(false);
const [isLegendOpen, setIsLegendOpen] = useState(false);
```

### **Fun√ß√£o: `changePosition(newPositionId)`**

**Fluxo de Mudan√ßa de Posi√ß√£o:**

1. **Atualiza√ß√£o do Estado**
   ```javascript
   setSelectedPositionId(newPositionId);
   ```

2. **Gerenciamento de Hist√≥rico**
   ```javascript
   setVisitedPositions(prev => {
     const updated = [...prev];
     if (selectedPositionId && !updated.includes(selectedPositionId)) {
       updated.push(selectedPositionId);
     }
     if (!updated.includes(newPositionId)) {
       updated.push(newPositionId);
     }
     return updated;
   });
   ```

3. **C√°lculo de Conex√µes**
   ```javascript
   const smartConnections = getSmartConnections(newPositionId);
   const validConnectionIds = smartConnections.map(c => c.id);
   const newVisibleNodes = [newPositionId, ...validConnectionIds];
   ```

4. **Renderiza√ß√£o Sincronizada**
   - ‚ö° Atualiza√ß√£o imediata dos n√≥s vis√≠veis
   - üé® Re-renderiza√ß√£o do SVG via useEffect
   - üìä Atualiza√ß√£o do painel de detalhes

---

## üîç Sistema de Busca

### **Funcionalidade de Busca**
```javascript
const handleSearchPositions = (term) => {
  const results = [];
  Object.entries(positions).forEach(([posKey, position]) => {
    if (
      position.title.toLowerCase().includes(term.toLowerCase()) ||
      position.description.toLowerCase().includes(term.toLowerCase()) ||
      position.pillar.toLowerCase().includes(term.toLowerCase()) ||
      position.level.toLowerCase().includes(term.toLowerCase()) ||
      position.salary.toLowerCase().includes(term.toLowerCase())
    ) {
      // Calcular compatibilidade se aplic√°vel
      let compatibility = null;
      if (selectedPositionId && selectedPositionId !== posKey) {
        const connections = getSmartConnections(selectedPositionId);
        const connection = connections.find(c => c.id === posKey);
        if (connection) {
          compatibility = connection.score;
        }
      }
      
      results.push({
        ...position,
        key: posKey,
        compatibility: compatibility
      });
    }
  });
}
```

**Recursos de Busca:**
- üîé **Busca multicamp**: t√≠tulo, descri√ß√£o, √°rea, n√≠vel, sal√°rio
- üìä **Compatibilidade**: Mostra % de compatibilidade com posi√ß√£o atual
- üìã **Ordena√ß√£o inteligente**: Por compatibilidade, depois alfab√©tica
- ‚ö° **Busca em tempo real**: Atualiza√ß√£o conforme digita√ß√£o

---

## üé® Interface de Usu√°rio

### **Componentes Principais**

#### **1. Header com Estat√≠sticas**
```jsx
<div className="flex items-center gap-4">
  <span>{Object.keys(positions).length} Posi√ß√µes</span>
  <span>{visibleNodes.length} Vis√≠veis</span>
  <span>{getSmartConnections(selectedPositionId).length} Conex√µes Inteligentes</span>
  <span>Hist√≥rico: {visitedPositions.length} posi√ß√µes</span>
</div>
```

#### **2. Hist√≥rico de Carreira** (Novo!)
- üìã **Lista horizontal** acima do mapa mental
- üé® **Chips coloridos** por √°rea profissional
- üëÜ **Navega√ß√£o por clique** para posi√ß√µes anteriores
- üì± **Design responsivo** com flex-wrap

#### **3. Mapa SVG Interativo**
- üéØ **1000x700px** com viewBox responsivo
- üé® **Gradiente de fundo**: `linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)`
- ‚ö° **Hover effects**: Destaque de conex√µes relacionadas
- üëÜ **Click handlers**: Navega√ß√£o entre posi√ß√µes

#### **4. Painel de Detalhes**
- üìä **Grid responsivo**: 1 coluna (mobile) ‚Üí 2 colunas (desktop)
- üìã **Lista de conex√µes**: Todas as 12 conex√µes com detalhes
- üé® **Indicadores visuais**: Score, tipo de transi√ß√£o, diferen√ßa salarial
- ‚úÖ **Status visual**: Checkmark para n√≥s vis√≠veis no mapa

#### **5. Acorde√£o de Legenda**
- üìç **Posi√ß√£o fixa**: Bottom da tela
- üìö **3 se√ß√µes**: Tipos de conex√£o, indicadores, √°reas profissionais
- üé® **Paleta de cores**: Cada √°rea tem cor espec√≠fica
- üí° **Explica√ß√£o do algoritmo**: Sistema de 20% de corte

---

## üé® Sistema de Cores e Estilos

### **Paleta por √Årea Profissional**
```javascript
const colorMap = {
  'Tecnologia': '#1E40AF',      // Azul escuro
  'Produto': '#7C3AED',         // Roxo
  'Dados': '#DC2626',           // Vermelho
  'Gest√£o': '#059669',          // Verde
  'Financeiro': '#D97706',      // Laranja
  'Recursos Humanos': '#BE185D' // Rosa
};
```

### **Estilos de Conex√£o**
```javascript
// Conex√µes dentro da mesma √°rea
if (d.type === 'internal') return '#60A5FA'; // Azul claro, linha s√≥lida

// Conex√µes entre √°reas diferentes  
if (d.type === 'cross-functional') return '#A78BFA'; // Roxo claro, linha tracejada
```

### **Indicadores Visuais**
- üéØ **Posi√ß√£o atual**: Borda dourada (#FBBF24) + sombra
- üìè **Espessura das linhas**: Proporcional ao score de compatibilidade
- üëª **Opacidade**: Cross-functional = 0.6, Internal = 0.8
- üé® **Setas**: Marcadores SVG indicando dire√ß√£o da transi√ß√£o

---

## ‚ö° Performance e Otimiza√ß√µes

### **Renderiza√ß√£o Eficiente**
```javascript
useEffect(() => {
  const svg = d3.select(svgRef.current);
  svg.selectAll("*").remove(); // Limpeza completa antes de re-render
  
  // ... l√≥gica de renderiza√ß√£o ...
  
}, [visibleNodes, selectedPositionId]); // Depend√™ncias espec√≠ficas
```

### **Preven√ß√£o de Re-renders Desnecess√°rios**
- üéØ **Depend√™ncias espec√≠ficas**: useEffect s√≥ roda quando necess√°rio
- üìä **C√°lculo sob demanda**: Conex√µes calculadas apenas quando mudan√ßa de posi√ß√£o
- üö´ **Remo√ß√£o de setTimeout**: Renderiza√ß√£o s√≠ncrona para evitar inconsist√™ncias
- üé® **D3.js join pattern**: Efici√™ncia na manipula√ß√£o do DOM

### **Anti-Collision Optimizado**
- ‚ö° **100 itera√ß√µes m√°ximas**: Evita loops infinitos
- üìê **Detec√ß√£o eficiente**: Verifica√ß√£o de overlap com margem
- üéØ **Prioriza√ß√£o**: N√≥ central mant√©m posi√ß√£o fixa
- üìè **Valida√ß√£o de limites**: N√≥s sempre dentro da √°rea vis√≠vel

---

## üîß Funcionalidades Avan√ßadas

### **1. Sistema de Filtros**
- **üëÅÔ∏è Mostrar V√°lidos**: Exibe todas as posi√ß√µes com conex√µes ‚â•20%
- **‚Üª Resetar**: Volta ao estado inicial (dev-net)
- **üîç Busca din√¢mica**: Filtro em tempo real com compatibilidade

### **2. Gest√£o de Hist√≥rico**
```javascript
// Hist√≥rico √© gerenciado separadamente dos n√≥s vis√≠veis
const newVisibleNodes = [newPositionId, ...validConnectionIds];
// N√£o inclui mais automaticamente visitedPositions
```

### **3. Navega√ß√£o Inteligente**
- **Clique em conex√£o**: Adiciona √† visualiza√ß√£o se tem score ‚â•20%
- **Clique no hist√≥rico**: Navega e calcula novas conex√µes
- **Busca com navega√ß√£o**: Busca ‚Üí clique ‚Üí mudan√ßa de posi√ß√£o

### **4. Feedback Visual em Tempo Real**
- **Hover nos n√≥s**: Destaque de conex√µes relacionadas
- **Indicador de visibilidade**: ‚úÖ nos n√≥s j√° vis√≠veis no mapa
- **Score colorido**: Verde (70%+), Amarelo (50-69%), Laranja (<50%)

---

## üìä Estrutura de Dados

### **Formato das Posi√ß√µes**
```javascript
{
  "dev-net": {
    "title": "Desenvolvedor .NET",
    "level": "Pleno",
    "pillar": "Tecnologia", 
    "salary": "R$ 8.000 - R$ 12.000",
    "salaryMin": 8000,
    "salaryMax": 12000,
    "description": "Desenvolvimento de aplica√ß√µes...",
    "requirements": [
      "Experi√™ncia com C# e .NET Framework",
      "Conhecimento em SQL Server",
      // ...
    ]
  }
}
```

### **Estrutura de Conex√£o**
```javascript
{
  id: "targetPositionId",
  position: { /* dados da posi√ß√£o */ },
  score: 85, // 0-100
  reasons: ["Progress√£o salarial", "Mesma √°rea"],
  salaryDifference: 3000, // Diferen√ßa em reais
  transitionType: "internal" // ou "cross-functional"
}
```

---

## üöÄ Fluxo de Execu√ß√£o

### **1. Inicializa√ß√£o**
```
App carrega ‚Üí Estado inicial (dev-net) ‚Üí Calcula conex√µes ‚Üí Renderiza SVG
```

### **2. Mudan√ßa de Posi√ß√£o**
```
Click/Busca ‚Üí changePosition() ‚Üí Atualiza estados ‚Üí useEffect ‚Üí Re-render SVG
```

### **3. Renderiza√ß√£o do Mapa**
```
Limpa SVG ‚Üí Cria n√≥s ‚Üí Resolve colis√µes ‚Üí Adiciona links ‚Üí Adiciona interatividade
```

### **4. Intera√ß√£o do Usu√°rio**
```
Hover ‚Üí Destaque ‚Üí Click ‚Üí Navega√ß√£o ‚Üí Atualiza√ß√£o ‚Üí Feedback visual
```

---

## üéØ Casos de Uso Principais

### **1. Explora√ß√£o de Carreira**
- üë§ **Usu√°rio**: Profissional buscando crescimento
- üéØ **Objetivo**: Visualizar op√ß√µes de transi√ß√£o realistas
- üìä **Valor**: Baseado em dados salariais e compatibilidade

### **2. Planejamento de Transi√ß√£o**
- üë§ **Usu√°rio**: Profissional em mudan√ßa de √°rea
- üéØ **Objetivo**: Entender requisitos e diferen√ßa salarial
- üìä **Valor**: Score de compatibilidade + detalhes t√©cnicos

### **3. An√°lise Comparativa**
- üë§ **Usu√°rio**: Recrutador ou consultor de carreira
- üéØ **Objetivo**: Comparar m√∫ltiplas op√ß√µes
- üìä **Valor**: Visualiza√ß√£o clara de conex√µes e hist√≥rico

---

## üîÆ Poss√≠veis Melhorias

### **Performance**
- ‚ö° Lazy loading para grandes datasets
- üé® Canvas rendering para >100 n√≥s
- üíæ Cache de conex√µes calculadas

### **UX/UI**
- üì± Gestos touch para mobile
- üé® Anima√ß√µes de transi√ß√£o suaves
- üîç Zoom e pan no SVG

### **Funcionalidades**
- üìä Exporta√ß√£o de relat√≥rios
- üíæ Salvar hist√≥rico no localStorage
- üéØ Filtros avan√ßados por crit√©rios espec√≠ficos

---

## üìù Conclus√£o

O **Mapa Mental de Carreira** √© uma aplica√ß√£o sofisticada que combina algoritmos inteligentes de compatibilidade com visualiza√ß√£o interativa avan√ßada. O sistema oferece insights valiosos para transi√ß√µes de carreira atrav√©s de:

- üß† **Algoritmo robusto** de an√°lise de compatibilidade
- üé® **Visualiza√ß√£o clara** com D3.js e SVG
- ‚ö° **Performance otimizada** com React + Vite
- üéÆ **Interatividade fluida** com feedback em tempo real
- üìä **Interface intuitiva** com componentes bem estruturados

A aplica√ß√£o representa uma ferramenta valiosa para profissionais, recrutadores e consultores de carreira que buscam dados quantitativos para decis√µes estrat√©gicas de desenvolvimento profissional.

---

*Documenta√ß√£o gerada em: 30 de Agosto de 2025*  
*Vers√£o: 2.0 (UI Reestruturada)*
